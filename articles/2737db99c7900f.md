---
title: "HTTPとHTTPS"
emoji: "💨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["http", "https", "security"]
published: false
---

# HTTP の基礎

ブラウザは`HTTP`という通信規格に従いリソースの CRUD 操作を行います。
下記の矢印が`HTTP`を使った通信になります。

```mermaid
    sequenceDiagram
    participant ユーザー
    participant ブラウザ
    participant DNSサーバー
    participant Webサイトのサーバー
    ユーザー->>ブラウザ: URLを入力してWebサイトにアクセス
    ブラウザ->>DNSサーバー:　IPアドレスを問い合わせる
    DNSサーバー->>ブラウザ: IPアドレスを応答する
    ブラウザ->>Webサイトのサーバー: 取得したIPアドレスのWebサーバーにコンテンツを要求
    Webサイトのサーバー->>ブラウザ: コンテンツを返却（HTMLや画像など）
    ブラウザ->>ユーザー:　Webサイトを表示
```

DNSやHTTPは`TCP/IP`という仕組みを使っています。
コンピュータはルールに従って通信する必要があります。送受信者それぞれ規約に従いやり取りする必要があるのですが、この規約のことを`通信プロトコル`といいます。
`HTTP`も通信プロトコルの一種です。
そしてTCPとIPを含む通信プロトコルの総称を`TCP/IP`と呼びます。
`TCP/IP`の階層は以下の四から成り立っています。

### アプリケーション層
- アプリケーションに応じた通信をする
  - 例: HTTP, SMTP
### トランスポート層
- インターネット層から受け取ったデータなどをアプリケーション層に渡すかどうか決めたりデータの誤りを検知したりする
    - 例: TCP(データを確実に相手に届けるとき使う), UDP(リアルタイム性重視するとき使う)
### インターネット層
- どのコンピュータにデータを届けるか決定する
    - 例: IP
### データリンク層
- データは物理的に送信可能な電気信号に変換してやり取りされるが、その電気信号を相手に届けたり信号の誤りや検知を行う
  - Ethernet(有線LAN), IEEE 802.11(無線LAN)

上の層のプロトコルはそれぞれヘッダを付与しながら下の層へプロトコルデータを渡し、受信側は各層でヘッダを取り出しながら上の層へデータを渡します。

## HTTPメッセージ

HTTPではブラウザとサーバ間でHTTPメッセージという決まった形式でデータをやり取りします。
HTTPメッセージにはリクエストとレスポンスの2種類があります。

### HTTPリクエスト

HTTPによるブラウザとサーバの通信はリクエストから始まります。
HTTPリクエストは下記で構成されています。

- リクエストライン
  - HTTPメソッド、リソースパス、HTTPのバージョン情報
- ヘッダ
  - ブラウザ情報や接続に関する情報
- ボディ
  - リクエストの本文にあたる情報

### HTTPレスポンス

リクエストに応じてサーバから返却された情報です。
HTTPレスポンスは下記で構成されています。

- ステータスライン
    - 処理結果を表すステータスコード、HTTPのバージョン情報
- ヘッダ
    - ブラウザ情報や接続に関する情報
- ボディ
    - レスポンスの本文にあたる情報

## HTTPメソッド

- GET,POST,PUT,DELETE,
  - リソースを取得/作成/更新/削除する
- HEAD
  - HTTPヘッダを取得する
- CONNECT
  - HTTP上に他のプロトコルを流せるようにする（プロキシサーバ経由でHTTPS通信をする際に使われることが多い）
- OPTIONS
  - 通信オプションを確認する
- TRACE
  - サーバが受け取ったデータをそのまま返す
  - XSTを引き起こす攻撃に利用される可能性があるため、ほとんどのブラウザはサポートしていない

## HTTPヘッダ

- 