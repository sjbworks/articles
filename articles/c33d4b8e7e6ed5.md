---
title: "Svelteを使ってみた話"
emoji: "✍️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["svelte"]
published: false
---

# Svelte の概要

## 高速

Svelte は仮想 DOM を使用せず、コードをビルド時にコンパイルして DOM に反映します。
React はそれに対して実行時にコードを解釈しています。

![a](https://www.w3schools.com/js/pic_htmltree.gif)
_出典:[JavaScript HTML DOM](https://www.w3schools.com/js/js_htmldom.asp)_

リアル DOM の操作は、例えがページに一つページが加わると、その時 DOM 全体を再構築しますが、仮想 DOM を使うと、変更前の仮想 DOM と変更後の仮想 DOM の差分のみを DOM に反映できるのでレンダリング効率が良いとされています。
しかし、「リアル DOM との差分を計算するのは結局コストだよね」と Svelte は提唱しています。
Svelte はコンパイル時に変更する可能性のある変数などを全て Vanilla JS に落とし込んでいます。

## ステート管理が楽

リアクティブな値の宣言が単純で、`$:`の後に続く式がリアクティブに増します。
React のように`useState`でセッターを定義する必要がないので楽に書けます。

```typescript
// react
const [status,setStatus] = useState();
useEffect(() => setStatus(a+b)), [a, b]);

//svelte
let x;
$: x = a + b;
```

## Svelte + TypeScript で Generics が使えない

例えば、何らかの型の配列が渡されるを想定したコンポーネントに対し、任意の型をジェネリクスで渡したいとします。
React だと以下のように実現することができます。

```react
type Props<T> = {
  data: T[]
  className?: string | undefined
}

export const List = <T,>(props: Props<T>) => <ChildComponent {...props} />
```

Svelte だとまだ上記のように書くことができませんが、実験的な機能としてベータ版で提供しているようです。
わりと使う記法だし、フィードバックの Issue も動いているので今後に期待しています。

### 対象 Issue

https://github.com/dummdidumm/rfcs/blob/ts-typedefs-within-svelte-components/text/ts-typing-props-slots-events.md
https://github.com/sveltejs/language-tools/issues/442

※まだ実験的な機能でありセマンティックバージョンは準拠してない
